<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>PointFilterBox.mxml</title>
<link rel="stylesheet" type="text/css" href="../../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">A sophisticated set of data filters that control the display of matching species populations depending on a whole range of filters, e.g. country, RDB status. This box is part of the reports box.</span><span class="MXMLASDoc">--&gt;</span>
<span class="MXMLComponent_Tag">&lt;s:BorderContainer</span><span class="MXMLDefault_Text"> xmlns:fx="</span><span class="MXMLString">http://ns.adobe.com/mxml/2009</span><span class="MXMLDefault_Text">" 
                   xmlns:s="</span><span class="MXMLString">library://ns.adobe.com/flex/spark</span><span class="MXMLDefault_Text">" 
                   xmlns:mx="</span><span class="MXMLString">library://ns.adobe.com/flex/mx</span><span class="MXMLDefault_Text">" xmlns:classes="</span><span class="MXMLString">wcmc.classes.*</span><span class="MXMLDefault_Text">" xmlns:components="</span><span class="MXMLString">wcmc.components.*</span><span class="MXMLDefault_Text">" borderAlpha="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" xmlns:esri="</span><span class="MXMLString">http://www.esri.com/2008/ags</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
    
    <span class="MXMLSpecial_Tag">&lt;fx:Declarations&gt;</span>
        <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">The allSpeciesFilter is used for filtering the reports for country list for species, population list for species and population list for a point. The filter includes all species.</span><span class="MXMLASDoc">--&gt;</span>
        <span class="MXMLComponent_Tag">&lt;classes:FilterCollection</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">flywaysFilter</span><span class="MXMLDefault_Text">" masterTableName="</span><span class="MXMLString">V_FLYWAYS</span><span class="MXMLDefault_Text">" filterResultComplete="</span><span class="ActionScriptDefault_Text">filterResultsComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;classes:filters&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:ArrayCollection&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_FLYWAY table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">speciesFlywayPoint</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">V_FLYWAYS</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcFlyRecID</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpcFlyRecIDPt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_FAMILY table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">familyPoint</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT32'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_FAMILY</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">FamName</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesFamilyPt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_GENUS table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">genusPoint</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT33'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_GENUS</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">GenName</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesPt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_SPECIES table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">speciesPoint</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT208'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_SPECIES</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">application</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">commonNameField</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesSpeciesPt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_REDLIST table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">redlistPoint</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT35'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_REDLIST</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">Category</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.RDBFilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesRDBPt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_HABITAT_LEVEL1 table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">habitat1Point</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT36'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_HABITAT_LEVEL1</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">HabL1Desc</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesHab1Pt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_HABITAT_LEVEL2 table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">habitat2Point</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT37'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_HABITAT_LEVEL2</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">HabL2Desc</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesHab2Pt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_LEGAL table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">legalPoint</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT38'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_LEGAL</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">LegName</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesLegalPt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_THREAT_LEVEL1 table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">threatl1Point</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT39'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_THREAT_LEVEL1</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">ThrL1Desc</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesThreat1Pt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">
                    Filter on the F_SPECIES_THREAT_LEVEL2 table in the database.
                    </span><span class="MXMLASDoc">--&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;classes:Filter</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">threatl2Point</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT40'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" table="</span><span class="MXMLString">F_SPECIES_THREAT_LEVEL2</span><span class="MXMLDefault_Text">" valueField="</span><span class="MXMLString">ThrL2Desc</span><span class="MXMLDefault_Text">" masterTableFilterFieldName="</span><span class="MXMLString">SpcRecID</span><span class="MXMLDefault_Text">" filterRenderer="</span><span class="MXMLString">wcmc.renderers.FilterRenderer</span><span class="MXMLDefault_Text">" sharedObjectName="</span><span class="MXMLString">flywaysSpeciesThreat2Pt</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/s:ArrayCollection&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/classes:filters&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/classes:FilterCollection&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:Fade</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">fader</span><span class="MXMLDefault_Text">" duration="</span><span class="MXMLString">250</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">A QueryTask that is used to retrieve a list of species populations based on the SpcFlyRecIDs - these are either passed from a matching country or a user-defined point.</span><span class="MXMLASDoc">--&gt;</span>
        <span class="MXMLComponent_Tag">&lt;esri:QueryTask</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">flywaysQueryTask</span><span class="MXMLDefault_Text">" url="</span><span class="MXMLString">http://dev.unep-wcmc.org/ArcGIS/rest/services/CSN/Reports/MapServer/0</span><span class="MXMLDefault_Text">" showBusyCursor="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLASDoc">&lt;!---</span><span class="MXMLASDoc">The Query object for the countrySpeciesQueryTask. The where value is set to currently selected country in the country drop down box.</span><span class="MXMLASDoc">--&gt;</span>
        <span class="MXMLComponent_Tag">&lt;esri:Query</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">flywaysQuery</span><span class="MXMLDefault_Text">" outFields="</span><span class="MXMLString">*</span><span class="MXMLDefault_Text">" returnGeometry="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Declarations&gt;</span>
    <span class="MXMLComponent_Tag">&lt;s:HGroup</span><span class="MXMLDefault_Text"> gap="</span><span class="MXMLString">3</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:VGroup</span><span class="MXMLDefault_Text"> width="</span><span class="MXMLString">183</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:Label</span><span class="MXMLDefault_Text"> text="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">resourceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'myResources'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'TEXT208'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" fontSize="</span><span class="MXMLString">14</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">familyPoint</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">genusPoint</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">speciesPoint</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">redlistPoint</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">legalPoint</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">habitat1Point</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">habitat2Point</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">threatl1Point</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;components:FilterUI</span><span class="MXMLDefault_Text"> filter="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">threatl2Point</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:VGroup&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:HGroup&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;fx:Script&gt;</span>
        &lt;![CDATA[
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">classes</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Utilities</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_application</span>:<span class="ActionScriptDefault_Text">CSN</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">classes</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FilterResultCompleteEvent</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">application</span>:<span class="ActionScriptDefault_Text">CSN</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spcFlyRecIDs</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">spcFlyRecIDs</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spcFlyRecIDs</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">spcFlyRecIDs</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_spcFlyRecIDs</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">value</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span><span class="ActionScriptOperator">+=</span><span class="ActionScriptString">"'"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"',"</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">spcFlyRecIDsString</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">spcFlyRecIDsString</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">spcFlyRecIDsString</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">speciesFlywayPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">whereClause</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"V_FLYWAYS.SpcFlyRecID IN ("</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">")"</span> : <span class="ActionScriptDefault_Text">speciesPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">whereClause</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span>; <span class="ActionScriptComment">//set the species filter in the filter collection
</span>                <span class="ActionScriptDefault_Text">flywaysFilter</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMatchingIDs</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clearAllFilters</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">flywaysFilter</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clearAll</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">filterResultsComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">FilterResultCompleteEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">spcFlyRecIDs</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span>; <span class="ActionScriptComment">//if the user hasnt selected a country, or clicked on the map yet then there will be no spcFlyRecIDs
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">filterResult</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">getNoData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//no matching flyways
</span>                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">filterResult</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">filterFieldName</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptString">"SpcFlyRecID"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span>; <span class="ActionScriptComment">//only get matching flyways using the SpcFlyRecIDs
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">spcflyRecIDs</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">filterResult</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matchingIDs</span>; <span class="ActionScriptComment">//get the matching IDs
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span>:<span class="ActionScriptDefault_Text">String</span>; <span class="ActionScriptComment">//create an In Clause for the SQL
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">spcflyRecIDs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">&gt;</span>0<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">Utilities</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">arrayCollectionToString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">spcflyRecIDs</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">flywaysQuery</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">where</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"SpcFlyRecID IN ("</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">spcFlyRecIDsString</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">")"</span>;
                    <span class="ActionScriptDefault_Text">flywaysQueryTask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">execute</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flywaysQuery</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//run the querytask to get the matching flyways that will be bound to the datagrids
</span>                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">getNoData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//there are no matching IDs - therefore run the query to get no flyways which will bind to the data grids
</span>                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getNoData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">query</span>:<span class="ActionScriptDefault_Text">Query</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Query</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">query</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">where</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"OBJECTID&lt;0"</span>; <span class="ActionScriptComment">//bit of a hack
</span>                <span class="ActionScriptDefault_Text">flywaysQueryTask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">execute</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">query</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Script&gt;</span>
<span class="MXMLComponent_Tag">&lt;/s:BorderContainer&gt;</span></pre></body>
</html>
